# История изменений

## [Недавние обновления]

### Добавлен вопрос о локации в опросник
- ✅ Вопрос "Где планируешь тренироваться?" (дом/зал)
- ✅ Учитывается при выборе программы из Google Sheets
- ✅ Сохраняется в базе данных

### Система сохранения программ
- ✅ Программы сохраняются в БД после генерации
- ✅ Команда `/my_programs` для просмотра программ
- ✅ Возможность скачать последнюю программу

### Улучшения генерации программ
- ✅ Улучшена обработка ошибок
- ✅ Fallback на ссылку Google Sheets при ошибках
- ✅ Сохранение программы в БД перед генерацией PDF

## [Система генерации программ]

### Реализовано:
- ✅ Чтение данных из Google Sheets
- ✅ Выбор программы по параметрам клиента
- ✅ Форматирование через LLM (Yandex GPT)
- ✅ Генерация PDF файла
- ✅ Отправка PDF клиенту в Telegram

### Сервисы:
- ✅ `training_program_generator.py` - чтение из Google Sheets
- ✅ `program_formatter.py` - форматирование через LLM
- ✅ `pdf_generator.py` - генерация PDF
- ✅ `program_storage.py` - сохранение в БД

## [Интеграция ЮКасса]

### Реализовано:
- ✅ Создание платежей через ЮКасса
- ✅ Генерация ссылок на оплату
- ✅ Обработка чеков согласно 54-ФЗ
- ✅ Fallback на ручную оплату

## [AI Сервис]

### Реализовано:
- ✅ Поддержка Yandex GPT (yandexgpt-lite)
- ✅ Поддержка OpenAI через ProxyAPI
- ✅ Автоматический fallback между провайдерами
- ✅ Настраиваемые модели и параметры

## [Telegram Бот MVP]

### Реализовано:
- ✅ Главное меню
- ✅ Квалификационный опросник (5 вопросов)
- ✅ Система платежей
- ✅ FAQ
- ✅ Контакты тренера
- ✅ Админ-панель
- ✅ Команды: /start, /program, /my_programs, /price, /contacts, /faq, /stats

## [База данных]

### Модели:
- ✅ Client - информация о клиентах
- ✅ Lead - лиды и квалификация
- ✅ Payment - платежи
- ✅ TrainingProgram - программы тренировок

## [Следующие шаги]

### Планируется:
- [ ] Интеграция с amoCRM
- [ ] Webhook для ЮКасса
- [ ] AI-агент для ответов на вопросы
- [ ] Система замен упражнений
- [ ] Автоматизация соцсетей
- [ ] Реферальная программа
- [ ] Генерация видео-контента
